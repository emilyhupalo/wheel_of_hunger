<!DOCTYPE html>

<html>
    <head>
        <title>British_$</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="AnimationClass.js"></script> 
    </head>
    <body>
        <div> 
        
            <h1> Spin the Wheel </h1> <br>
        <canvas id="canvasOne" width="600" height="300"></canvas>   
        </div>
        
        <script type="text/javascript"> 
            function Gear(config){ 
                this.x = config.x; 
                this.y = config.y;
                this.outerRadius = config.outerRadius;
                this.innerRadius = config.innerRadius; 
                this.numTeeth = config.numTeeth; 
                this.theta = config.theta; 
                this.theatSpeed = config.thetaSpeed; 
                this.lightColor = config.lightColor; 
                this.darkColor = config.darkColor; 
                this.clockwise = config.clockwise; 
                this.midRadius = config.outerRadius - 10;
            }
            
            Gear.prototype.draw = function(context){
                context.save(); 
                context.translate(this.x, this.y);
                context.rotate(this.theta); 
                context.beginPath();
                context.lineJoin = "bevel"; 
                var numPoints = this.numTeeth *2;
                for (var n = 0; n < numPoints; n++) {
                    var radius = null; 
                    if (n % 2 == 0) {
                        radius = this.outerRadius; 
                    }
                else {
                        radius = this.innerRadius; 
                    }
                    var theta = ((Math.PI * 2) / numPoints) * (n + 1); 
                    var x = (radius * Math.sin(theta));
                    var y = (radius * Math.cos(theta));
                    if (n == 0) { 
                        context.moveTo(x, y);
                    } 
                else {
                        context.lineTo(x, y); 
                    }
                  }
                context.closePath(); 
                
                context.lineWidth = 5; 
                context.strokeStlye = this.darkColor; 
                context.stroke(); 
                context.beginPath();
                context.arc(0, 0, this.midRadius, 0, 2 * Math.PI, false);
                
                var grd = context.createLinearGradient(-1 * this.outerRadius / 2, -1 * this.outerRadius / 2, this.outerRadius / 2, this.outerRadius / 2);
                grd.addColorStop(0, this.lightColor); 
                grd.addColorStop(1, this.darkColor); 
                context.fillStyle = grd; 
                context.fill();
                context.lineWidth = 5; 
                context.strokeStyle = this.darkColor; 
                context.stroke();
                context.beginPath();
                context.arc(0, 0, this.holeRadius, 0, 2 * Math.PI, false); 
                context.fillStyle = "white";
                context.fill();
                context.strokeStyle = this.darkColor; 
                context.stroke();
                context.restore();
            };
            
            
            window.onload = function() {
                var anim = new Animation("canvasOne"); 
                var canvas = anim.getCanvas();
                var context = anim.getContext();
                var gears = [];
            gears.push(new Gear({ 
                x: 270,
                y: 105,
                outerRadius: 90, 
                innerRadius: 50, 
                holeRadius: 10, 
                numTeeth: 1,
                theta: 0,
                thetaSpeed: 1 / 1000, lightColor: "#B1CCFF",
                darkColor: "#3959CC",
                clockwise: true 
            }));
            
            
            anim.setStage(function(){
                for (var i = 0; i < gears.length; i++) {
                    var gear = gears[i];
                    var thetaIncrement = gear.thetaSpeed * this.
                            getTimeInterval();
                    gear.theta += gear.clockwise ? thetaIncrement
                            : -1 * thetaIncrement; 
                        }      
            this.clear();

            for (var i = 0; i < gears.length; i++) { 
                gears[i].draw(context);
               } 
            });
             
            anim.start(); 
        };
        </script> 
    </body>
</html>
